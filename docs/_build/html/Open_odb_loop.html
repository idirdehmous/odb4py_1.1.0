

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using odb4py Inside Loops &mdash; odb4py 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=fc837d61"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            odb4py
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Before_retrieve.html">Before retriving the data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Data_retrieval.html">SQL Query and Data Retrieval</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">odb4py</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Using odb4py Inside Loops</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Open_odb_loop.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-odb4py-inside-loops">
<h1>Using odb4py Inside Loops<a class="headerlink" href="#using-odb4py-inside-loops" title="Link to this heading">ÔÉÅ</a></h1>
<p>ODB databases are frequently used to perform diagnostics and statistical
analysis over a sequence of dates or time periods. In such workflows,
looping over dates is therefore a common and necessary practice.</p>
<p>During these iterations, both the database path and the associated date
must be updated at each step. If this is not done correctly, odb4py
may continue to operate on the first opened ODB database. As a result,
identical rows and values may be returned even though the loop variable
(e.g. the date) changes.</p>
<p>This behavior originates from the ODB runtime itself, which relies on a
set of environment variables defining the active database paths. These
variables remain persistent across iterations unless explicitly updated.</p>
<p>To ensure that each iteration accesses the correct database, the
following ODB environment variables must be updated accordingly:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ODB_SRCPATH_CCMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ODB_DATAPATH_CCMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ODB_IDXPATH_CCMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IOASSIGN</span></code></p></li>
</ul>
<p>Updating these variables forces the ODB runtime to reload the correct
database context and prevents unintended reuse of a previously opened
ODB.</p>
<p>Recommended workflow:</p>
<ol class="arabic simple">
<li><p>Update the database path and environment variables for the current date.</p></li>
<li><p>Open the database.</p></li>
<li><p>Execute the required queries.</p></li>
<li><p>Close the database before moving to the next iteration.</p></li>
</ol>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, I.Dehmous.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>